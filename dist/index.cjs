function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t,n=/*#__PURE__*/e(require("lodash"));exports.ConfigCategory=void 0,(t=exports.ConfigCategory||(exports.ConfigCategory={})).Settings="settings",t.Translations="translations",t.UI="ui";var r={setting:{plural:exports.ConfigCategory.Settings,label:"Setting",labelPlural:"Settings",order:1},translation:{plural:exports.ConfigCategory.Translations,label:"Translation",labelPlural:"Translations",order:2},ui:{plural:exports.ConfigCategory.UI,label:"UI",labelPlural:"UI",order:3},ORGANIZATION_SETTINGS:{plural:"ORGANIZATION_SETTINGS",label:"Organization",labelPlural:"Organization",order:1},TRANSLATION_SETTINGS:{plural:"TRANSLATION_SETTINGS",label:"Translation",labelPlural:"Translations",order:2},FEATURE_SETTINGS:{plural:"FEATURE_SETTINGS",label:"Feature",labelPlural:"Features",order:3}},o=n.default.assign,a=n.default.mapValues,l=function(e){return void 0===e&&(e={}),e=a(e,function(){return!0}),o({nested:!1,categorized:!1},e)},u=n.default.each,i=n.default.setWith,s=function(e){var t={};return u(e,function(e,n){i(t,n,e,Object)}),t},f=n.default.each,c=n.default.get,d=n.default.each,p=n.default.has;function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e,t,n){return h=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&v(o,n.prototype),o},h.apply(null,arguments)}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},m(e)}var T=n.default.assign,O=n.default.each,C=n.default.get,I=n.default.has,S=n.default.isObject,P=n.default.kebabCase,E=n.default.last,j=n.default.mapKeys,x=n.default.mapValues,N=n.default.merge,R=n.default.set,L=n.default.size,w=n.default.split,k=n.default.startCase,A=n.default.unset,_=function(e){return"object"==typeof e&&"boolean"==typeof e.default?"switch":"input"},F=function(e,t,n){if(void 0===n&&(n=!1),S(t)){if(!n&&!I(t,"default"))throw new Error('Config "'+e+'" is missing a "default" value.')}else t={default:t};return t},G=function(e,t,n){if(void 0===n&&(n={}),delete(t=F(e,t)).key,t.docLink){var r='Documentation on this feature can be found <a href="'+t.docLink+'">here</a>.';t.hint=t.hint?r+"<br>"+t.hint:r,delete t.docLink}return T({default:null,type:_(t),label:k(E(w(e,"."))),category:"setting"},t,n)},U=function(e,t,r){return void 0===t&&(t={}),e=j(e,function(e,t){return n.default.get(e,"key",t)}),x(e,function(e,n){return r&&r(n,e),G(n,e,t)})},V=function(e,t,n){N(e,function(e,t,n){return U(t,n,function(t){if(I(e,t))throw new Error('Duplicate key: "'+t+'"')})}(e,t,n))},z=function(e,t){return T({label:k(E(w(e,"."))),order:0,toggleable:!1,description:null,rootKey:null},t)},q=function(e){var t=e.getComponents,r=e.getConfigs,o=e.getLabel,a=e.getName,l=e.source;try{var u=function(e){function a(o){function a(e){var t=function(){if(r)return Promise.resolve(r()).then(function(t){var n=U(t),r=function(e,t){void 0===t&&(t={});var n={},r=!1;return O(e,function(e){if("object"==typeof e&&I(e,"component")){if(!I(n,e.component)){var o={};if(I(t,e.component)){var a=t[e.component].getOptions;o=a?a():t[e.component]}n[e.component]=z(e.component,o)}}else r=!0}),r&&L(n)&&(n.unsorted=z("unsorted",{order:999})),n}(n,e);N(l,{config:n,components:r})});var t,o,a,u=(o={},a=function(e){return x(e,function(e,t){var n=e.getOptions;return z(t,n?n():null)})}(t=e),O(t,function(e,t){var r=e.getConfigs,l=e.getSettings,u=e.getTranslations,i=e.getUI,s={component:t},f=function(e,t){var r={group:{path:"groups"},tab:{path:"tabs"}},o=function(e,t){void 0===t&&(t=null);var n={};return O(e,function(e,r){if(e=F(r,e),t){var o=t(r,e);n[o.key]=o.config}else n[r]=e}),n},a=function(n,a,l,u,i,s){return void 0===u&&(u=!0),void 0===i&&(i="group"),function(n,o,a,l){void 0===l&&(l="group");var u=r[l].path,i={};O(a,function(n){if("object"==typeof n&&n.group){var o=n.group;O(r,function(n){var r=C(e,[t,n.path,o]);if(r){R(i,[n.path,o],r),A(e,[t,n.path,o]);var a=C(e,[t,n.path],{});0===L(a)&&A(e,[t,n.path])}})}}),R(e,[t,u,n],T({label:o},i))}(n,a,l,i),o(l,function(e,t){return t.group=t.group?n+"."+t.group:n,s&&s(e,t),{key:u?n+"."+e:e,config:t}})};return{addNested:function(e,t){return o(t,function(t,n){return"object"==typeof n&&(n.visibleIf&&(n.visibleIf=e+"."+n.visibleIf),n.longLabel=k(e)+" ⇢ "+(n.longLabel?n.longLabel:n.label?n.label:k(t))),{key:e+"."+t,config:n}})},addFeature:function(e,t,r,o,l){if(void 0===o&&(o=!1),void 0===l&&(l=!0),I(r,"enabled"))throw new Error('Feature "'+e+'" should not contain a property named "enabled".');return r=T({enabled:F("enabled",o)},r),a(e,t,r,l,"group",function(t,r){"enabled"!==t&&"object"==typeof r&&n.default.set(r,"visibleIf",e+".enabled")})},addGroup:a,addTab:function(e,t){var n=P(e);return a(n,e,t,!1,"tab")},addField:function(e,t){var n={},r=e+".isVisible",o=k(e);return n.isVisible={default:!0,label:"Visible",longLabel:o+" ⇢ Visible",styleClasses:"col-md-2"},n.required={default:!1,label:"Required",longLabel:o+" ⇢ Required",visibleIf:r,styleClasses:"col-md-2"},n.disabled={default:!1,label:"Disabled",longLabel:o+" ⇢ Disabled",visibleIf:r,styleClasses:"col-md-2"},n.readonly={default:!1,label:"Readonly",longLabel:o+" ⇢ Readonly",visibleIf:r,styleClasses:"col-md-2"},n.hasAutoFocus={default:!1,label:"Autofocus",longLabel:o+" ⇢ Autofocus",visibleIf:r,styleClasses:"col-md-2"},n.pattern={default:"",label:"Pattern",longLabel:o+" ⇢ Pattern",visibleIf:r,styleClasses:"col-md-12"},t&&t&&t({insert:function(e,t){if(I(n,e))throw new Error("Field "+e+" already exists!");var a=G(e,t,{visibleIf:r,styleClasses:"col-md-12"});a.longLabel=o+" ⇢ "+a.label,n[e]=a},modify:function(e,t){N(n[e],F(e,t,!0))}}),a(e,k(e),n,!0)}}}(a,t);r?V(o,r(f),s):(l&&V(o,l(f),T(s,{category:"setting"})),u&&V(o,u(f),T(s,{category:"translation"})),i&&V(o,i(f),T(s,{category:"ui"})))}),{configs:o,components:a});N(l,{configs:u.configs,components:u.components})}();return t&&t.then?t.then(function(){return l}):l}var l={name:e,label:o};return t?Promise.resolve(t()).then(a):a(null)}return o?Promise.resolve(o()).then(a):a(k(e))};return Promise.resolve(a?Promise.resolve(a()).then(u):u(l))}catch(e){return Promise.reject(e)}},D=/*#__PURE__*/function(e){var t,n;function r(t,n){var r;return(r=e.call(this,n.message+' ("'+t+'" source)')||this).name="SourceError",r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n),r}(/*#__PURE__*/m(Error));exports.CATEGORIES=r,exports.SourceError=D,exports.getTransformationOptions=l,exports.parseSource=q,exports.parseSourceConfigs=function(e,t){try{return Promise.resolve(q(g({source:e},t))).then(function(e){return e.configs})}catch(e){return Promise.reject(e)}},exports.transformResponse=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=l(t),o=function(e,t){void 0===t&&(t=null);var n={};return f(e,function(e,r){if(t){var o=t(r,e),a=o.key,l=o.value;a&&(r=a),l&&(e=l)}n[r]=e}),n}(e,function(e){if(r.categorized){var t=c(n,e);t&&(e=t.category+"."+e)}return{key:e}});return r.nested?s(o):o},exports.transformToConfigValues=function(e,t){void 0===t&&(t={});var n=l(t),o=function(e,t){void 0===t&&(t=null);var n={};return d(e,function(e,r){var o=p(e,"value")?e.value:e.default;if(t){var a=t(r,e),l=a.key,u=a.value;l&&(r=l),u&&(o=u)}n[r]=o}),n}(e,function(e,t){return{key:e=n.categorized?r[t.category].plural+"."+e:e}});return n.nested?s(o):o},exports.transformToNested=s;
//# sourceMappingURL=index.cjs.map
