import e from"lodash";var t=e.each,n=e.setWith,o=function(e){var o={};return t(e,function(e,t){n(o,t,e,Object)}),o};function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function l(e,t,n){return l=u()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&i(r,n.prototype),r},l.apply(null,arguments)}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,r(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},a(e)}var c=e.assign,s=e.each,f=e.get,d=e.has,p=e.isObject,b=e.kebabCase,v=e.last,g=e.mapKeys,y=e.mapValues,h=e.merge,m=e.set,O=e.size,w=e.split,L=e.startCase,C=e.unset,k=function(e){return"boolean"==typeof e.default?"switch":"input"},I=function(e,t,n){if(void 0===n&&(n=!1),p(t)){if(!n&&!d(t,"default"))throw new Error('Config "'+e+'" is missing a "default" value.')}else t={default:t};return t},P=function(e,t,n){if(void 0===n&&(n={}),delete(t=I(e,t)).key,t.docLink){var o='Documentation on this feature can be found <a href="'+t.docLink+'">here</a>.';t.hint=t.hint?o+"<br>"+t.hint:o,delete t.docLink}return c({default:null,type:k(t),label:L(v(w(e,"."))),category:"setting"},t,n)},j=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=null),e=g(e,function(e,t){return e.key?e.key:t}),y(e,function(e,o){return n&&n(o,e),P(o,e,t)})},R=function(e,t,n){h(e,function(e,t,n){return j(t,n,function(t){if(d(e,t))throw new Error('Duplicate key: "'+t+'"')})}(e,t,n))},_=function(e,t){return void 0===t&&(t=null),c({label:L(v(w(e,"."))),order:0,toggleable:!1,description:null,rootKey:null},t)},E=function(e){var t=e.getComponents,n=e.getConfigs,o=e.getLabel,r=e.getName,i=e.source;try{var u=function(e){var t=function(){if(n)return Promise.resolve(n()).then(function(t){var n=j(t),o=function(e,t){void 0===t&&(t={});var n={},o=!1;return s(e,function(e){if(d(e,"component")){if(!d(n,e.component)){var r={};if(d(t,e.component)){var i=t[e.component].getOptions;r=i?i():t[e.component]}n[e.component]=_(e.component,r)}}else o=!0}),o&&O(n)&&(n.unsorted=_("unsorted",{order:999})),n}(n,e);h(a,{configs:n,components:o})});var t,o,r,i=(o={},r=function(e){return y(e,function(e,t){var n=e.getOptions;return _(t,n?n():null)})}(t=e),s(t,function(e,t){var n=e.getConfigs,i=e.getSettings,u=e.getTranslations,l=e.getUI,a={component:t},p=function(e,t){var n={group:{path:"groups"},tab:{path:"tabs"}},o=function(e,t){void 0===t&&(t=null);var n={};return s(e,function(e,o){if(e=I(o,e),t){var r=t(o,e);n[r.key]=r.config}else n[o]=e}),n},r=function(r,i,u,l,a,d){return void 0===l&&(l=!0),void 0===a&&(a="group"),void 0===d&&(d=null),function(o,r,i,u){void 0===u&&(u="group");var l=n[u].path,a={};s(i,function(o){if(o.group){var r=o.group;s(n,function(n){var o=f(e,[t,n.path,r]);if(o){m(a,[n.path,r],o),C(e,[t,n.path,r]);var i=f(e,[t,n.path],{});0===O(i)&&C(e,[t,n.path])}})}}),m(e,[t,l,o],c({label:r},a))}(r,i,u,a),o(u,function(e,t){return t.group=t.group?r+"."+t.group:r,d&&d(e,t),{key:l?r+"."+e:e,config:t}})};return{addNested:function(e,t){return o(t,function(t,n){return n.visibleIf&&(n.visibleIf=e+"."+n.visibleIf),n.longLabel=L(e)+" ⇢ "+(n.longLabel?n.longLabel:n.label?n.label:L(t)),{key:e+"."+t,config:n}})},addFeature:function(e,t,n,o,i){if(void 0===o&&(o=!1),void 0===i&&(i=!0),d(n,"enabled"))throw new Error('Feature "'+e+'" should not contain a property named "enabled".');return n=c({enabled:I("enabled",o)},n),r(e,t,n,i,"group",function(t,n){"enabled"!==t&&(n.visibleIf=e+".enabled")})},addGroup:r,addTab:function(e,t){var n=b(e);return r(n,e,t,!1,"tab")},addField:function(e,t){void 0===t&&(t=null);var n={},o=e+".isVisible",i=L(e);return n.isVisible={default:!0,label:"Visible",longLabel:i+" ⇢ Visible",styleClasses:"col-md-2"},n.required={default:!1,label:"Required",longLabel:i+" ⇢ Required",visibleIf:o,styleClasses:"col-md-2"},n.disabled={default:!1,label:"Disabled",longLabel:i+" ⇢ Disabled",visibleIf:o,styleClasses:"col-md-2"},n.readonly={default:!1,label:"Readonly",longLabel:i+" ⇢ Readonly",visibleIf:o,styleClasses:"col-md-2"},n.hasAutoFocus={default:!1,label:"Autofocus",longLabel:i+" ⇢ Autofocus",visibleIf:o,styleClasses:"col-md-2"},n.pattern={default:"",label:"Pattern",longLabel:i+" ⇢ Pattern",visibleIf:o,styleClasses:"col-md-12"},t&&t({insert:function(e,t){if(d(n,e))throw new Error("Field "+e+" already exists!");var r=P(e,t,{visibleIf:o,styleClasses:"col-md-12"});r.longLabel=i+" ⇢ "+r.label,n[e]=r},modify:function(e,t){h(n[e],I(e,t,!0))}}),r(e,L(e),n,!0)}}}(r,t);n?R(o,n(p),a):(i&&R(o,i(p),c(a,{category:"setting"})),u&&R(o,u(p),c(a,{category:"translation"})),l&&R(o,l(p),c(a,{category:"ui"})))}),{configs:o,components:r});h(a,{configs:i.configs,components:i.components})}();return t&&t.then?t.then(function(){return a}):a},l=r?r():i,a={name:l,label:o?o():L(l)};return Promise.resolve(t?Promise.resolve(t()).then(u):u(null))}catch(e){return Promise.reject(e)}},F=function(e,t){void 0===t&&(t=null),t=c({nested:!1},t);var n={};return s(e,function(e,t){n[t]=e.default}),t.nested?o(n):n},x=/*#__PURE__*/function(e){var t,n;function o(t,n){var o;return(o=e.call(this,n.message+' ("'+t+'" source)')||this).name="SourceError",o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o}(/*#__PURE__*/a(Error));export{x as SourceError,o as convertToNested,F as getMockResponse,E as parseSource};
//# sourceMappingURL=index.module.mjs.map
