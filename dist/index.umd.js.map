{"version":3,"file":"index.umd.js","sources":["../src/constants/CATEGORIES.ts","../src/fetchConfigs/transformationOptions.ts","../src/fetchConfigs/transformToNested.ts","../src/fetchConfigs/transformResponse.ts","../src/fetchConfigs/transformToConfigValues.ts","../src/parseSource/parseSource.ts","../src/parseSource/parseSourceConfigs.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\nexport enum ConfigCategory {\n  Setting = `setting`,\n  Translation = `translation`,\n  UI = `ui`,\n  OrganizationSettingV3 = `ORGANIZATION_SETTINGS`,\n  TranslationSettingV3 = `TRANSLATION_SETTINGS`,\n  FeatureSettingV3 = `FEATURE_SETTINGS`\n}\n\nexport enum ConfigCategoryPlurals {\n  Setting = `settings`,\n  Translation = `translations`,\n  UI = `ui`,\n  OrganizationSettingV3 = `ORGANIZATION_SETTINGS`,\n  TranslationSettingV3 = `TRANSLATION_SETTINGS`,\n  FeatureSettingV3 = `FEATURE_SETTINGS`\n}\n/* eslint-enable: no-unused-vars */\n\nconst CATEGORIES = {\n  [ConfigCategory.Setting]: {\n    plural: ConfigCategoryPlurals.Setting,\n    label: `Setting`,\n    labelPlural: `Settings`,\n    order: 1,\n  },\n  [ConfigCategory.Translation]: {\n    plural: ConfigCategoryPlurals.Translation,\n    label: `Translation`,\n    labelPlural: `Translations`,\n    order: 2,\n  },\n   [ConfigCategory.UI]: {\n    plural: ConfigCategoryPlurals.UI,\n    label: `UI`,\n    labelPlural: `UI`,\n    order: 3,\n  },\n  [ConfigCategory.OrganizationSettingV3]: {\n    plural: ConfigCategoryPlurals.OrganizationSettingV3,\n    label: `Organization`,\n    labelPlural: `Organization`,\n    order: 1,\n  },\n  [ConfigCategory.TranslationSettingV3]: {\n    plural: ConfigCategoryPlurals.TranslationSettingV3,\n    label: `Translation`,\n    labelPlural: `Translations`,\n    order: 2,\n  },\n  [ConfigCategory.FeatureSettingV3]: {\n    plural: ConfigCategoryPlurals.FeatureSettingV3,\n    label: `Feature`,\n    labelPlural: `Features`,\n    order: 3,\n  },\n}\n\nexport { CATEGORIES }\n","import lodash from 'lodash'\n\nconst { assign, mapValues } = lodash\n\nexport type TransformationOptions = {\n  nested: boolean,\n  categorized: boolean,\n}\n\nconst getTransformationOptions = (options: Partial<TransformationOptions> = {}): TransformationOptions => {\n\n  options = mapValues(options, () => true)\n\n  const opts: TransformationOptions = {\n    nested: false,\n    categorized: false,\n  }\n\n  return assign(opts, options)\n}\n\nexport { getTransformationOptions }\n","import lodash from 'lodash'\n\nconst { each, setWith } = lodash\n\nconst transformToNested = object => {\n\n  const transformed = {}\n\n  each(object, (value, key) => {\n    setWith(transformed, key, value, Object)\n  })\n\n  return transformed\n}\n\nexport { transformToNested }\n","import lodash from 'lodash'\n\nimport { getTransformationOptions } from './transformationOptions'\nimport { transformToNested } from './transformToNested'\n\nconst { each, get } = lodash\n\nconst helpTransformResponse = (response, callback = null) => {\n\n  const transformed = {}\n\n  each(response, (value, key) => {\n\n    if (callback) {\n\n      const {\n        key: newKey,\n        value: newValue,\n      } = callback(key, value)\n\n      if (newKey) {\n        key = newKey\n      }\n\n      if (newValue) {\n        value = newValue\n      }\n    }\n\n    transformed[key] = value\n  })\n\n  return transformed\n}\n\nconst transformResponse = (response, opts = {}, configs = null) => {\n\n  const options = getTransformationOptions(opts)\n\n  const transformed = helpTransformResponse(response, key => {\n\n    if (options.categorized) {\n\n      const config = get(configs, key)\n\n      if (config) {\n        key = `${config.category}.${key}`\n      }\n    }\n\n    return {\n      key,\n    }\n  })\n\n  if (options.nested) {\n    return transformToNested(transformed)\n  }\n\n  return transformed\n}\n\nexport { transformResponse }\n","import lodash from 'lodash'\n\nimport { CATEGORIES } from '../constants'\nimport { getTransformationOptions } from './transformationOptions'\nimport { transformToNested } from './transformToNested'\n\nconst { each, has } = lodash\n\nconst transformFromConfigsToResponse = (configs, callback = null) => {\n\n  const response = {}\n\n  each(configs, (config, key) => {\n\n    let value = has(config, `value`) ? config.value : config.default\n\n    if (callback) {\n\n      const {\n        key: newKey,\n        value: newValue,\n      } = callback(key, config)\n\n      if (newKey) {\n        key = newKey\n      }\n\n      if (newValue) {\n        value = newValue\n      }\n    }\n\n    response[key] = value\n  })\n\n  return response\n}\n\nconst transformToConfigValues = (configs, opts = {}) => {\n\n  const options = getTransformationOptions(opts)\n\n  const response = transformFromConfigsToResponse(configs, (key, config) => {\n\n    key = options.categorized ? `${CATEGORIES[config.category].plural}.${key}` : key\n\n    return {\n      key,\n    }\n  })\n\n  if (options.nested) {\n    return transformToNested(response)\n  }\n\n  return response\n}\n\nexport { transformToConfigValues }\n","import lodash from 'lodash'\n\nimport type { Component, ComponentOptions, Components, Config, ConfigObject, Configs, Source, StandardizedConfigs } from '../types'\n\nconst { assign, each, get, has, isObject, kebabCase, last, mapKeys, mapValues, merge, set, size, split, startCase, unset } = lodash\n\nexport type SourceConfigs = {\n  getComponents?: () => Promise<Components>,\n  getConfigs?: () => Promise<Configs>,\n  getLabel?: () => string | Promise<string | undefined>,\n  getName?: () => string | Promise<string | undefined>,\n  source?: string\n}\n\nexport type HelperFunctions = ReturnType<typeof getHelpers>\n\nexport type Definitions = {\n  [key: string]: DefinitionComponent\n}\n\n/* eslint-disable no-unused-vars */\nexport type DefinitionComponent = {\n  getConfigs?: (_: HelperFunctions) => Configs\n  getSettings?: (_: HelperFunctions) => Configs\n  getTranslations?: (_: HelperFunctions) => Configs\n  getUI?: (_: HelperFunctions) => Configs,\n  getOptions?: () => Component\n}\n\n/* eslint-enable no-unused-vars */\n\nconst getType = (config: Config) => {\n  if (typeof config === `object`) {\n    switch (typeof config.default) {\n      case `boolean`:\n        return `switch`\n    }\n  }\n\n  return `input`\n}\n\nconst standardizeConfig = (key: string, config: Config, skipDefaultCheck = false) => {\n\n  if (isObject(config)) {\n    if (!skipDefaultCheck && !has(config, `default`)) {\n      throw new Error(`Config \"${key}\" is missing a \"default\" value.`)\n    }\n  } else {\n    config = {\n      default: config,\n    }\n  }\n\n  return config as ConfigObject\n}\n\nconst parseConfig = (key: string, config: Config, options: Partial<ConfigObject> = {}) => {\n\n  config = standardizeConfig(key, config)\n\n  delete config.key\n\n  if (config.docLink) {\n    const docLinkText = `Documentation on this feature can be found <a href=\"${config.docLink}\">here</a>.`\n    config.hint = config.hint ? docLinkText + `<br>${config.hint}` : docLinkText\n    delete config.docLink\n  }\n\n  return assign({\n    default: null, // This is placed here so that `default` appears as first property\n    type: getType(config),\n    label: startCase(last(split(key, `.`))),\n    category: `setting`,\n  } as ConfigObject, config, options) as ConfigObject\n}\n\nconst parseConfigs = (\n  configs: Configs,\n  options: Partial<ConfigObject> = {},\n  // eslint-disable-next-line no-unused-vars\n  callback?: (key: string, config: Config) => void,\n) => {\n\n  configs = mapKeys(configs, (config: Config, key: string) => {\n    return lodash.get(config, `key`, key)\n  })\n\n  return mapValues(configs, (config: Config, key: string) => {\n\n    callback && callback(key, config)\n\n    return parseConfig(key, config, options)\n  }) as StandardizedConfigs\n}\n\nconst parseUniqueConfigs = (set: Configs, configs: Configs, options: Partial<ConfigObject>) => {\n  return parseConfigs(configs, options, (key) => {\n    if (has(set, key)) {\n      throw new Error(`Duplicate key: \"${key}\"`)\n    }\n  })\n}\n\nconst parseConfigsIntoCollection = (set: Configs, configs: Configs, options: Partial<ComponentOptions>) => {\n  merge(set, parseUniqueConfigs(set, configs, options))\n}\n\nconst getHelpers = (components: Components, component: string) => {\n\n  const groupTypes = {\n    group: {\n      path: `groups`,\n    },\n    tab: {\n      path: `tabs`,\n    },\n  }\n\n  const walkConfigs = (configs: Configs, callback = null) => {\n\n    const walked: StandardizedConfigs = {}\n\n    each(configs, (config, key) => {\n      config = standardizeConfig(key, config)\n      if (callback) {\n        const {\n          config: newConfig,\n          key: newKey,\n        } = callback(key, config)\n        walked[newKey] = newConfig\n      } else {\n        walked[key] = config\n      }\n    })\n\n    return walked\n  }\n\n  const setComponentGroup = (name: string, label: string, configs: Configs, type = `group`) => {\n\n    let path: string = groupTypes[type].path\n    let replacement: ComponentOptions = {}\n\n    each(configs, config => {\n      if (typeof config === `object` && config.group) {\n\n        // TODO: This variable should handle cases where group value is deeply nested\n        const groupExpanded = config.group\n\n        each(groupTypes, groupType => {\n          const group = get(components, [component, groupType.path, groupExpanded])\n          if (group) {\n            set(replacement, [groupType.path, groupExpanded], group)\n            unset(components, [component, groupType.path, groupExpanded])\n\n            const holder = get(components, [component, groupType.path], {})\n            if (size(holder) === 0) {\n              unset(components, [component, groupType.path])\n            }\n          }\n        })\n      }\n    })\n\n    // TODO: Need to think about this more\n    // if (has(components, [component, path, name])) {\n    //   throw new Error(`Duplicate ${type}: \"${name}\"`)\n    // }\n\n    set(components, [component, path, name], assign({\n      label: label,\n    }, replacement))\n  }\n\n  const addNested = (name: string, configs: Configs) => {\n    return walkConfigs(configs, (key: string, config: Config) => {\n\n      if (typeof config === `object`) {\n        if (config.visibleIf) {\n          config.visibleIf = `${name}.${config.visibleIf}`\n        }\n\n        config.longLabel = `${startCase(name)} ⇢ ${config.longLabel ? config.longLabel : (config.label ? config.label : startCase(key))}`\n      }\n\n      return {\n        key: `${name}.${key}`,\n        config,\n      }\n    })\n  }\n\n  const addGroup = (\n    name: string,\n    label: string,\n    configs: Configs,\n    nesting = true,\n    type = `group`,\n    /* eslint-disable-next-line no-unused-vars */\n    callback?: (_: string, _2: Config) => void,\n  ) => {\n    setComponentGroup(name, label, configs, type)\n\n    return walkConfigs(configs, (key: string, config: ConfigObject) => {\n      config.group = config.group ? `${name}.${config.group}` : name\n\n      if (callback) {\n        callback(key, config)\n      }\n\n      return {\n        key: nesting ? `${name}.${key}` : key,\n        config,\n      }\n    })\n  }\n\n  const addFeature = (name: string, label: string, configs: Configs, enabled = false, nesting = true) => {\n\n    if (has(configs, `enabled`)) {\n      throw new Error(`Feature \"${name}\" should not contain a property named \"enabled\".`)\n    }\n\n    configs = assign({\n      enabled: standardizeConfig(`enabled`, enabled),\n    }, configs)\n\n    configs = addGroup(name, label, configs, nesting, `group`, (key, config) => {\n      if (key !== `enabled`) {\n        typeof config === `object` && lodash.set(config, `visibleIf`, `${name}.enabled`)\n      }\n    })\n\n    return configs as StandardizedConfigs\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  type AddFieldCallbackInnerFuncType = (key: string, config: Config) => void\n\n  const addField = (\n    key: string,\n    // eslint-disable-next-line no-unused-vars\n    callback?: (arg: { insert: AddFieldCallbackInnerFuncType, modify: AddFieldCallbackInnerFuncType }) => void,\n  ) => {\n\n    let fields: Configs = {}\n\n    const visibleIf = `${key}.isVisible`\n\n    const prettyKey = startCase(key)\n\n    fields.isVisible = {\n      default: true,\n      label: `Visible`,\n      longLabel: `${prettyKey} ⇢ Visible`,\n      styleClasses: `col-md-2`,\n    }\n\n    fields.required = {\n      default: false,\n      label: `Required`,\n      longLabel: `${prettyKey} ⇢ Required`,\n      visibleIf: visibleIf,\n      styleClasses: `col-md-2`,\n    }\n\n    fields.disabled = {\n      default: false,\n      label: `Disabled`,\n      longLabel: `${prettyKey} ⇢ Disabled`,\n      visibleIf: visibleIf,\n      styleClasses: `col-md-2`,\n    }\n\n    fields.readonly = {\n      default: false,\n      label: `Readonly`,\n      longLabel: `${prettyKey} ⇢ Readonly`,\n      visibleIf: visibleIf,\n      styleClasses: `col-md-2`,\n    }\n\n    fields.hasAutoFocus = {\n      default: false,\n      label: `Autofocus`,\n      longLabel: `${prettyKey} ⇢ Autofocus`,\n      visibleIf: visibleIf,\n      styleClasses: `col-md-2`,\n    }\n\n    fields.pattern = {\n      default: ``,\n      label: `Pattern`,\n      longLabel: `${prettyKey} ⇢ Pattern`,\n      visibleIf: visibleIf,\n      styleClasses: `col-md-12`,\n    }\n\n    if (callback) {\n\n      const insert: AddFieldCallbackInnerFuncType = (key, config) => {\n\n        if (has(fields, key)) {\n          throw new Error(`Field ${key} already exists!`)\n        }\n\n        const parsedConfig = parseConfig(key, config, {\n          visibleIf: visibleIf,\n          styleClasses: `col-md-12`,\n        })\n\n        parsedConfig.longLabel = `${prettyKey} ⇢ ${parsedConfig.label}`\n\n        fields[key] = parsedConfig\n      }\n\n      const modify: AddFieldCallbackInnerFuncType = (key, config) => {\n        merge(fields[key], standardizeConfig(key, config, true))\n      }\n\n      callback && callback({\n        insert,\n        modify,\n      })\n    }\n\n    return addGroup(key, startCase(key), fields, true)\n  }\n\n  const addTab = (label: string, configs: Configs) => {\n\n    const name = kebabCase(label)\n\n    return addGroup(name, label, configs, false, `tab`)\n  }\n\n  return {\n    addNested,\n    addFeature,\n    addGroup,\n    addTab,\n    addField,\n  }\n}\n\nconst parseConfigsAndComponents = (definitions: Definitions) => {\n\n  const configs: Configs = {}\n  const components = parseComponents(definitions)\n\n  each(definitions, (component, key) => {\n\n    const {\n      getConfigs,\n      getSettings,\n      getTranslations,\n      getUI,\n    } = component\n\n    const options: Partial<ConfigObject> = {\n      component: key,\n    }\n\n    const helpers = getHelpers(components, key)\n\n    if (getConfigs) {\n      parseConfigsIntoCollection(configs, getConfigs(helpers), options)\n    } else {\n\n      if (getSettings) {\n        parseConfigsIntoCollection(configs, getSettings(helpers), assign(options, {\n          category: `setting`,\n        }))\n      }\n\n      if (getTranslations) {\n        parseConfigsIntoCollection(configs, getTranslations(helpers), assign(options, {\n          category: `translation`,\n        }))\n      }\n\n      if (getUI) {\n        parseConfigsIntoCollection(configs, getUI(helpers), assign(options, {\n          category: `ui`,\n        }))\n      }\n    }\n  })\n\n  return {\n    configs,\n    components,\n  }\n}\n\nconst parseComponent = (key: string, component?: ComponentOptions) => {\n  return assign({\n    label: startCase(last(split(key, `.`))),\n    order: 0,\n    toggleable: false,\n    description: null,\n    rootKey: null,\n  }, component) as ComponentOptions\n}\n\nconst parseComponents = (components: Components) => {\n  return mapValues(components, (component, key: string) => {\n    const { getOptions } = component\n\n    return parseComponent(key, getOptions ? getOptions() : null)\n  }) as Components\n}\n\nconst parseComponentsFromConfigs = (configs: Configs, structure: Components = {}) => {\n\n  // TODO: Place all these types in the \"types\" directory\n  const components: Components = {}\n\n  let hasUnsorted = false\n\n  each(configs, config => {\n    if (typeof config === `object` && has(config, `component`)) {\n      if (!has(components, config.component)) {\n\n        let options = {}\n        if (has(structure, config.component)) {\n          const { getOptions } = structure[config.component]\n          options = getOptions ? getOptions() : structure[config.component]\n        }\n\n        components[config.component] = parseComponent(config.component, options)\n      }\n    } else {\n      hasUnsorted = true\n    }\n  })\n\n  if (hasUnsorted && size(components)) {\n    components.unsorted = parseComponent(`unsorted`, {\n      order: 999,\n    })\n  }\n\n  return components\n}\n\nconst parseSource = async ({ getComponents, getConfigs, getLabel, getName, source }: SourceConfigs) => {\n\n  const name = getName ? await getName() : source\n  const label = getLabel ? await getLabel() : startCase(name)\n\n  const options: Source = {\n    name,\n    label,\n  }\n\n  const grabComponents = getComponents ? await getComponents() : null\n\n  if (getConfigs) {\n    const config = parseConfigs(await getConfigs())\n    const components = parseComponentsFromConfigs(config, grabComponents)\n    merge(options, {\n      config,\n      components,\n    })\n  } else {\n    const { components, configs } = parseConfigsAndComponents(grabComponents)\n    merge(options, {\n      configs,\n      components,\n    })\n  }\n\n  return options\n}\n\nclass SourceError extends Error {\n\n  constructor(source, error) {\n    super(`${error.message} (\"${source}\" source)`)\n    this.name = `SourceError`\n  }\n}\n\nexport { parseSource, SourceError }\n","import { parseSource, SourceConfigs } from './parseSource'\n\nconst parseSourceConfigs = async (source: string, stack: SourceConfigs) => {\n\n  const parsedSource = await parseSource({\n    source,\n    ...stack,\n  })\n\n  return parsedSource.configs\n}\n\nexport { parseSourceConfigs }\n"],"names":["_CATEGORIES","ConfigCategory","ConfigCategoryPlurals","CATEGORIES","Setting","plural","label","labelPlural","order","Translation","UI","OrganizationSettingV3","TranslationSettingV3","FeatureSettingV3","assign","lodash","mapValues","getTransformationOptions","options","nested","categorized","each","setWith","transformToNested","object","transformed","value","key","Object","get","has","isObject","kebabCase","last","mapKeys","merge","set","size","split","startCase","unset","getType","config","standardizeConfig","skipDefaultCheck","Error","default","parseConfig","docLink","docLinkText","hint","type","category","parseConfigs","configs","callback","parseConfigsIntoCollection","parseUniqueConfigs","parseComponent","component","toggleable","description","rootKey","parseSource","_ref","getComponents","getConfigs","getLabel","getName","source","_temp5","name","_temp3","_temp2","grabComponents","_temp","Promise","resolve","then","_getConfigs","components","structure","hasUnsorted","getOptions","unsorted","parseComponentsFromConfigs","definitions","_parseConfigsAndCompo","parseComponents","getSettings","getTranslations","getUI","helpers","groupTypes","group","path","tab","walkConfigs","walked","_callback","addGroup","nesting","replacement","groupExpanded","groupType","holder","setComponentGroup","addNested","visibleIf","longLabel","addFeature","enabled","addTab","addField","fields","prettyKey","isVisible","styleClasses","required","disabled","readonly","hasAutoFocus","pattern","insert","parsedConfig","modify","getHelpers","error","_this","message","this","stack","parsedSource","e","reject","response","opts","newKey","newValue","helpTransformResponse","transformFromConfigsToResponse"],"mappings":"iVACAA,EAAYC,EASAC,sBATAD,EAAZA,oBAAA,GAAYA,EAAAA,EAAAA,iBAAAA,EAAAA,eAOX,KANC,QAAA,UACAA,EAAA,YAAA,cACAA,EAAA,GAAA,KACAA,EAAA,sBAAA,wBACAA,EAAA,qBAAA,uBACAA,EAAA,iBAAA,mBAGFC,EAAAA,2BAAA,GAAYA,EAAAA,EAAqBA,wBAArBA,EAAqBA,sBAOhC,KANC,QAAA,WACAA,EAAA,YAAA,eACAA,EAAA,GAAA,KACAA,EAAA,sBAAA,wBACAA,EAAA,qBAAA,uBACAA,EAAA,iBAAA,mBAIIC,IAAUA,IAAAH,EAAA,IACbC,EAAAA,eAAeG,SAAU,CACxBC,OAAQH,EAAqBA,sBAACE,QAC9BE,MAAK,UACLC,YAHwB,WAIxBC,MAAO,GAERP,EAAAA,EAAAA,eAAeQ,aAAc,CAC5BJ,OAAQH,EAAqBA,sBAACO,YAC9BH,MAAK,cACLC,YAH4B,eAI5BC,MAAO,GAEPP,EAAAA,EAAAA,eAAeS,IAAK,CACpBL,OAAQH,EAAqBA,sBAACQ,GAC9BJ,MAAK,KACLC,YAHoB,KAIpBC,MAAO,GAERP,EAAAA,EAAAA,eAAeU,uBAAwB,CACtCN,OAAQH,EAAqBA,sBAACS,sBAC9BL,MAAK,eACLC,YAHsC,eAItCC,MAAO,GAERP,EAAAA,EAAAA,eAAeW,sBAAuB,CACrCP,OAAQH,EAAqBA,sBAACU,qBAC9BN,MAAK,cACLC,YAHqC,eAIrCC,MAAO,GAERP,EAAAA,EAAAA,eAAeY,kBAAmB,CACjCR,OAAQH,EAAqBA,sBAACW,iBAC9BP,MAAK,UACLC,YAHiC,WAIjCC,MAAO,GAnCXR,GClBQc,EAAsBC,EAA9B,QAAQD,OAAQE,EAAcD,EAA9B,QAAgBC,UAOVC,EAA2B,SAACC,GAShC,YATuG,IAAvEA,IAAAA,EAA0C,IAE1EA,EAAUF,EAAUE,EAAS,WAAA,OAAA,IAOhBJ,EALuB,CAClCK,QAAQ,EACRC,aAAa,GAGKF,IChBtBG,EAA0BN,EAA1B,QAAQM,KAAMC,EAAYP,EAAAA,QAAZO,QAERC,EAAoB,SAAAC,GAExB,IAAiBC,EAAG,GAMpB,OAJAJ,EAAKG,EAAQ,SAACE,EAAOC,GACnBL,EAAQG,EAAaE,EAAKD,EAAOE,UAIpCH,GCRDJ,EAAsBN,EAAtB,QAAQM,KAAMQ,EAAQd,EAAAA,QAARc,ICCNR,EAAcN,EAAtB,QAAQM,KAAMS,EAAQf,EAAAA,QAARe,i5CCFd,IAAAhB,EAA6HC,EAA7H,QAAQD,OAAQO,EAA6GN,EAAAA,QAA7GM,KAAMQ,EAAuGd,EAA7H,QAAsBc,IAAKC,EAAkGf,EAA7H,QAA2Be,IAAKC,EAA6FhB,EAAAA,QAA7FgB,SAAUC,EAAmFjB,EAA7H,QAA0CiB,UAAWC,EAAwElB,EAA7H,QAAqDkB,KAAMC,EAAkEnB,EAAAA,QAAlEmB,QAASlB,EAAyDD,EAA7H,QAAoEC,UAAWmB,EAA8CpB,EAA7H,QAA+EoB,MAAOC,EAAuCrB,EAAAA,QAAvCqB,IAAKC,EAAkCtB,EAA7H,QAA2FsB,KAAMC,EAA4BvB,EAA7H,QAAiGuB,MAAOC,EAAqBxB,EAAAA,QAArBwB,UAAWC,EAAUzB,EAA7H,QAAmHyB,MA2B7GC,EAAU,SAACC,GACf,MAAA,iBAAWA,GAGL,kBAFWA,EAAf,QAEI,SAKP,SAEKC,EAAoB,SAAChB,EAAae,EAAgBE,GAEtD,QAFsDA,IAAAA,IAAAA,GAAmB,GAErEb,EAASW,IACX,IAAKE,IAAqBd,EAAIY,EAAD,WAC3B,MAAM,IAAAG,MAAA,WAAqBlB,EAArB,wCAGRe,EAAS,CACPI,QAASJ,GAIb,OACDA,GAEgBK,EAAG,SAACpB,EAAae,EAAgBxB,GAMhD,QANgDA,IAAAA,IAAAA,EAAiC,WAEjFwB,EAASC,EAAkBhB,EAAKe,IAElBf,IAEVe,EAAOM,QAAS,CAClB,IAAMC,EAAqEP,uDAAAA,EAAOM,QAAlF,cACAN,EAAOQ,KAAOR,EAAOQ,KAAOD,EAAW,OAAUP,EAAOQ,KAASD,WACnDD,QAGhB,OAAalC,EAAC,CACZgC,QAAS,KACTK,KAAMV,EAAQC,GACdpC,MAAOiC,EAAUN,EAAKK,EAAMX,EAAP,OACrByB,SAJY,WAKKV,EAAQxB,IAGXmC,EAAG,SACnBC,EACApC,EAEAqC,GAOA,YANE,IAHFrC,IAAAA,EAAiC,IAKjCoC,EAAUpB,EAAQoB,EAAS,SAACZ,EAAgBf,GAC1C,OAAaZ,EAAA,QAACc,IAAIa,EAAX,MAA0Bf,KAGnBX,EAACsC,EAAS,SAACZ,EAAgBf,GAIzC,OAFA4B,GAAYA,EAAS5B,EAAKe,GAEnBK,EAAYpB,EAAKe,EAAQxB,MAYJsC,EAAG,SAACpB,EAAckB,EAAkBpC,GAClEiB,EAAMC,EATmB,SAACA,EAAckB,EAAkBpC,GAC1D,OAAmBmC,EAACC,EAASpC,EAAS,SAACS,GACrC,GAAIG,EAAIM,EAAKT,GACX,MAAUkB,IAAAA,MAAyBlB,mBAAAA,SAM5B8B,CAAmBrB,EAAKkB,EAASpC,KAmSxCwC,EAAiB,SAAC/B,EAAagC,GACnC,SAAc,CACZrD,MAAOiC,EAAUN,EAAKK,EAAMX,EAAD,OAC3BnB,MAAO,EACPoD,YAAY,EACZC,YAAa,KACbC,QAAS,MACRH,IA4CYI,EAAA,SAAAC,GAAA,IAAAC,EAAAD,EAAYC,cAAeC,EAA3BF,EAA2BE,WAAYC,EAAvCH,EAAuCG,SAAUC,EAAAA,EAAAA,QAASC,EAAAA,EAAAA,OAA2B,IAAA,IAAAC,EAAA,SAE9FC,GAF8F,SAAAC,EAG9FlE,GAH8F,SAAAmE,EAU9FC,GAV8F,IAAAC,EAAA,WAAA,GAYhGT,EAZgG,OAAAU,QAAAC,QAahEX,KAAlCY,KAAA,SAAAC,GAAA,IAAYrC,EAAGW,EAAY0B,GACXC,EA/Ce,SAAC1B,EAAkB2B,QAA8B,IAA9BA,IAAAA,EAAwB,IAG5E,IAAgBD,EAAe,GAE3BE,GAAc,EAyBlB,OAvBA7D,EAAKiC,EAAS,SAAAZ,GACZ,GAAkCZ,iBAAvBY,GAAuBZ,EAAIY,EAAtC,cACE,IAAKZ,EAAIkD,EAAYtC,EAAOiB,WAAY,CAEtC,IAAIzC,EAAU,GACd,GAAIY,EAAImD,EAAWvC,EAAOiB,WAAY,CACpC,IAAQwB,EAAeF,EAAUvC,EAAOiB,WAAhCwB,WACRjE,EAAUiE,EAAaA,IAAeF,EAAUvC,EAAOiB,WAGzDqB,EAAWtC,EAAOiB,WAAaD,EAAehB,EAAOiB,UAAWzC,SAGlEgE,GAAc,IAIdA,GAAe7C,EAAK2C,KACtBA,EAAWI,SAAW1B,EAAc,WAAa,CAC/ClD,MAAO,OAKZwE,EAgBsBK,CAA2B3C,EAAQgC,GACtDvC,EAAMjB,EAAS,CACbwB,OAAAA,EACAsC,WAAAA,MAGF,IAzH+BM,EAEpBhC,EACP0B,EAsHJO,GAvHWjC,EAAY,GACnB0B,EAyDgB,SAACA,GACvB,OAAOhE,EAAUgE,EAAY,SAACrB,EAAWhC,GACvC,IAAAwD,EAAuBxB,EAAfwB,WAER,OAAqBzB,EAAC/B,EAAKwD,EAAaA,IAAe,QA7DtCK,CAHcF,EAyH2BZ,GApH5DrD,EAAKiE,EAAa,SAAC3B,EAAWhC,GAE5B,IACEuC,EAIEP,EAJFO,WACAuB,EAGE9B,EAHF8B,YACAC,EAEE/B,EAFF+B,gBACAC,EACEhC,EADFgC,MAGIzE,EAAiC,CACrCyC,UAAWhC,GAGAiE,EAhQE,SAACZ,EAAwBrB,GAE1C,IAAgBkC,EAAG,CACjBC,MAAO,CACLC,KAAI,UAENC,IAAK,CACHD,KADG,SAKUE,EAAG,SAAC3C,EAAkBC,QAAmB,IAAnBA,IAAAA,EAAW,MAEhD,IAAM2C,EAA8B,GAepC,OAbA7E,EAAKiC,EAAS,SAACZ,EAAQf,GAErB,GADAe,EAASC,EAAkBhB,EAAKe,GAC5Ba,EAAU,CACZ,IAGIA,EAAAA,EAAS5B,EAAKe,GAClBwD,EAJAC,EAEExE,KAFFwE,EACEzD,YAKFwD,EAAOvE,GAAOe,IAIXwD,GAyDHE,EAAW,SACf7B,EACAjE,EACAgD,EACA+C,EACAlD,EAEAI,GAIA,YAHE,IAJF8C,IAAAA,GAAU,QAIR,IAHFlD,IAAAA,EAGE,SA9DsB,SAACoB,EAAcjE,EAAegD,EAAkBH,QAAkB,IAAlBA,IAAAA,EAAkB,SAE1F,IAAI4C,EAAeF,EAAW1C,GAAM4C,KAChCO,EAAgC,GAEpCjF,EAAKiC,EAAS,SAAAZ,GACZ,GAAI,iBAAAA,GAA8BA,EAAOoD,MAAO,CAG9C,IAAmBS,EAAG7D,EAAOoD,MAE7BzE,EAAKwE,EAAY,SAAAW,GACf,IAAMV,EAAQjE,EAAImD,EAAY,CAACrB,EAAW6C,EAAUT,KAAMQ,IAC1D,GAAIT,EAAO,CACT1D,EAAIkE,EAAa,CAACE,EAAUT,KAAMQ,GAAgBT,GAClDtD,EAAMwC,EAAY,CAACrB,EAAW6C,EAAUT,KAAMQ,IAE9C,IAAME,EAAS5E,EAAImD,EAAY,CAACrB,EAAW6C,EAAUT,MAAO,IACvC,IAAjB1D,EAAKoE,IACPjE,EAAMwC,EAAY,CAACrB,EAAW6C,EAAUT,aAYlD3D,EAAI4C,EAAY,CAACrB,EAAWoC,EAAMxB,GAAOzD,EAAO,CAC9CR,MAAOA,GACNgG,IA8BHI,CAAkBnC,EAAMjE,EAAOgD,EAASH,GAEjC8C,EAAY3C,EAAS,SAAC3B,EAAae,GAOxC,OANAA,EAAOoD,MAAQpD,EAAOoD,MAAWvB,EAAQ7B,IAAAA,EAAOoD,MAAUvB,EAEtDhB,GACFA,EAAS5B,EAAKe,GAGT,CACLf,IAAK0E,EAAa9B,EAAQ5C,IAAAA,EAAQA,EAClCe,OAAAA,MA4HN,MAAO,CACLiE,UAnKgB,SAACpC,EAAcjB,GAC/B,OAAO2C,EAAY3C,EAAS,SAAC3B,EAAae,GAUxC,MARA,iBAAWA,IACLA,EAAOkE,YACTlE,EAAOkE,UAAerC,EAAtB,IAA8B7B,EAAOkE,WAGvClE,EAAOmE,UAAetE,EAAUgC,GAAW7B,OAAAA,EAAOmE,UAAYnE,EAAOmE,UAAanE,EAAOpC,MAAQoC,EAAOpC,MAAQiC,EAAUZ,KAGrH,CACLA,IAAQ4C,EAAL,IAAa5C,EAChBe,OAAAA,MAuJJoE,WAzHiB,SAACvC,EAAcjE,EAAegD,EAAkByD,EAAiBV,GAElF,QAFiEU,IAAAA,IAAAA,GAAU,QAAOV,IAAAA,IAAAA,GAAU,GAExFvE,EAAIwB,EAAR,WACE,MAAUT,IAAAA,MAAkB0B,YAAAA,EAC7B,oDAYD,OAVAjB,EAAUxC,EAAO,CACfiG,QAASpE,EAA6BoE,UAAAA,IACrCzD,GAEO8C,EAAS7B,EAAMjE,EAAOgD,EAAS+C,EAAkB,QAAA,SAAC1E,EAAKe,GAC/D,YAAIf,GACF,iBAAAe,GAA8B3B,EAAM,QAACqB,IAAIM,EAAX,YAAmC6B,EAClE,eA6GH6B,SAAAA,EACAY,OAXa,SAAC1G,EAAegD,GAE7B,IAAUiB,EAAGvC,EAAU1B,GAEvB,OAAe8F,EAAC7B,EAAMjE,EAAOgD,GAAS,EAAvB,QAQf2D,SAtGe,SACftF,EAEA4B,GAGA,IAAI2D,EAAkB,GAEPN,EAAMjF,EAAN,aAETwF,EAAY5E,EAAUZ,GA6E5B,OA3EAuF,EAAOE,UAAY,CACjBtE,SAAS,EACTxC,MAAK,UACLuG,UAAcM,EAHG,aAIjBE,aAAY,YAGdH,EAAOI,SAAW,CAChBxE,SAAS,EACTxC,MAFgB,WAGhBuG,UAAcM,EAAL,cACTP,UAAWA,EACXS,aALgB,YAQlBH,EAAOK,SAAW,CAChBzE,SAAS,EACTxC,iBACAuG,UAAcM,EAHE,cAIhBP,UAAWA,EACXS,aAAY,YAGdH,EAAOM,SAAW,CAChB1E,SAAS,EACTxC,MAAK,WACLuG,UAAcM,EAHE,cAIhBP,UAAWA,EACXS,aALgB,YAQlBH,EAAOO,aAAe,CACpB3E,SAAS,EACTxC,MAFoB,YAGpBuG,UAAcM,EAAL,eACTP,UAAWA,EACXS,aALoB,YAQtBH,EAAOQ,QAAU,CACf5E,QAAA,GACAxC,MAFe,UAGfuG,UAAcM,EAAL,aACTP,UAAWA,EACXS,aALe,aAQb9D,GAsBFA,GAAYA,EAAS,CACnBoE,OArB4C,SAAChG,EAAKe,GAElD,GAAIZ,EAAIoF,EAAQvF,GACd,MAAM,IAAAkB,MAAA,SAAmBlB,EAAnB,oBAGR,IAAkBiG,EAAG7E,EAAYpB,EAAKe,EAAQ,CAC5CkE,UAAWA,EACXS,aAAY,cAGdO,EAAaf,UAAeM,EAAeS,MAAAA,EAAatH,MAExD4G,EAAOvF,GAAOiG,GASdC,OAN4C,SAAClG,EAAKe,GAClDP,EAAM+E,EAAOvF,GAAMgB,EAAkBhB,EAAKe,GAAQ,OASvC0D,EAACzE,EAAKY,EAAUZ,GAAMuF,GAAQ,KAqC7BY,CAAW9C,EAAYrD,GAEnCuC,EACFV,EAA2BF,EAASY,EAAW0B,GAAU1E,IAGrDuE,GACFjC,EAA2BF,EAASmC,EAAYG,GAAU9E,EAAOI,EAAS,CACxEkC,SADwE,aAKxEsC,GACFlC,EAA2BF,EAASoC,EAAgBE,GAAU9E,EAAOI,EAAS,CAC5EkC,SAD4E,iBAK5EuC,GACFnC,EAA2BF,EAASqC,EAAMC,GAAU9E,EAAOI,EAAS,CAClEkC,SADkE,WAOnE,CACLE,QAAAA,EACA0B,WAAAA,IA4EA7C,EAAMjB,EAAS,CACboC,UAFkBA,QAGlB0B,WAHMA,EAAAA,aApB0F,GA2BpG,OAAAL,GAAAA,EAAAG,KAAAH,EAAAG,KAAA,WAAA,OA3BoG5D,IA2B7FA,EAtBP,IAAMA,EAAkB,CACtBqD,KAAAA,EACAjE,MAAAA,GAPkG,OAU7E2D,EAAsBA,QAAAA,QAAAA,KAVuDa,KAAAL,GAAAA,EAUrC,MAVqC,OAAAN,EAAAS,QAAAC,QAGrEV,KAAa5B,KAAAA,GAAAA,EAAAA,EAAUgC,KAH8C,OAAAK,QAAAC,QAEvFT,EAFuFQ,QAAAC,QAEvET,KAAYC,KAAAA,GAAAA,EAAAA,IAF1B,uEAgCf,SAAYA,EAAAA,EAAQ0D,GAAK,IAAAC,EAAA,OACvBA,EAASD,EAAAA,KAAAA,KAAAA,EAAME,QAAa5D,MAAAA,EAC5B,cAAA6D,MAAK3D,KAAL,cACDyD,yFALuBnF,gBAAAA,EAAAA,yGC3dF,SAAUwB,EAAgB8D,GAAwB,IAAA,OAAAvD,QAAAC,QAE7Cd,EACzBM,EAAAA,CAAAA,OAAAA,GACG8D,KAJmErD,KAAA,SAElEsD,GAKN,OAAmBA,EAAC9E,UAPE,MAAxB+E,GAAA,OAAAzD,QAAA0D,OAAAD,yBHiC0B,SAACE,EAAUC,EAAWlF,YAAXkF,IAAAA,EAAO,SAAsB,IAAlBlF,IAAAA,EAAU,MAExD,IAAMpC,EAAUD,EAAyBuH,KA9Bb,SAACD,EAAUhF,QAAmB,IAAnBA,IAAAA,EAAW,MAElD,IAAiB9B,EAAG,GAuBpB,OArBAJ,EAAKkH,EAAU,SAAC7G,EAAOC,GAErB,GAAI4B,EAAU,CAEZ,IAAA4C,EAGI5C,EAAS5B,EAAKD,GAFX+G,EADPtC,EACExE,IACO+G,EAFTvC,EAEEzE,MAGE+G,IACF9G,EAAM8G,GAGJC,IACFhH,EAAQgH,GAIZjH,EAAYE,GAAOD,IAGdD,EAOakH,CAAsBJ,EAAU,SAAA5G,GAElD,GAAIT,EAAQE,YAAa,CAEvB,MAAeS,EAAIyB,EAAS3B,GAExBe,IACFf,EAASe,EAAOU,SAAb,IAAyBzB,GAIhC,MAAO,CACLA,IAAAA,KAIJ,OAAIT,EAAQC,OACHI,EAAkBE,GAI5BA,6BCtB+B,SAAC6B,EAASkF,QAAa,IAAbA,IAAAA,EAAO,IAE/C,IAAatH,EAAGD,EAAyBuH,GAEnCD,EAlC+B,SAACjF,EAASC,QAAmB,IAAnBA,IAAAA,EAAW,MAE1D,IAAcgF,EAAG,GAyBjB,OAvBAlH,EAAKiC,EAAS,SAACZ,EAAQf,GAErB,MAAYG,EAAIY,EAAJ,SAAuBA,EAAOhB,MAAQgB,EAAlD,QAEA,GAAIa,EAAU,CAEZ,IAGIA,EAAAA,EAAS5B,EAAKe,GAFX+F,IAAL9G,IACO+G,EAFTvC,EAEEzE,MAGE+G,IACF9G,EAAM8G,GAGJC,IACFhH,EAAQgH,GAIZH,EAAS5G,GAAOD,MAUDkH,CAA+BtF,EAAS,SAAC3B,EAAKe,GAI7D,MAAO,CACLf,IAHFA,EAAMT,EAAQE,YAAiBjB,EAAWuC,EAAOU,UAAU/C,OAAUsB,IAAAA,EAAQA,KAO/E,OAAIT,EAAQC,OACHI,EAAkBgH,GAI5BA"}