!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],t):t((e||self).utils={},e.lodash)}(this,function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/n(t),r=o.default.assign,u=o.default.mapValues,a=function(e){return void 0===e&&(e={}),e=u(e,function(){return!0}),r({nested:!1,categorized:!1},e)},i=o.default.each,l=o.default.setWith,f=function(e){var t={};return i(e,function(e,n){l(t,n,e,Object)}),t},c=o.default.each,s=o.default.get,d=o.default.each,p=o.default.has;function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v.apply(this,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e,t,n){return h=y()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&g(r,n.prototype),r},h.apply(null,arguments)}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},m(e)}var O=o.default.assign,j=o.default.each,P=o.default.get,w=o.default.has,C=o.default.isObject,k=o.default.kebabCase,L=o.default.last,I=o.default.mapKeys,R=o.default.mapValues,E=o.default.merge,T=o.default.set,_=o.default.size,x=o.default.split,F=o.default.startCase,S=o.default.unset,V=function(e){return"object"==typeof e&&"boolean"==typeof e.default?"switch":"input"},q=function(e,t,n){if(void 0===n&&(n=!1),C(t)){if(!n&&!w(t,"default"))throw new Error('Config "'+e+'" is missing a "default" value.')}else t={default:t};return t},z=function(e,t,n){if(void 0===n&&(n={}),delete(t=q(e,t)).key,t.docLink){var o='Documentation on this feature can be found <a href="'+t.docLink+'">here</a>.';t.hint=t.hint?o+"<br>"+t.hint:o,delete t.docLink}return O({default:null,type:V(t),label:F(L(x(e,"."))),category:"setting"},t,n)},D=function(e,t,n){return void 0===t&&(t={}),e=I(e,function(e,t){return o.default.get(e,"key",t)}),R(e,function(e,o){return n&&n(o,e),z(o,e,t)})},A=function(e,t,n){E(e,function(e,t,n){return D(t,n,function(t){if(w(e,t))throw new Error('Duplicate key: "'+t+'"')})}(e,t,n))},N=function(e,t){return O({label:F(L(x(e,"."))),order:0,toggleable:!1,description:null,rootKey:null},t)},B=function(e){var t=e.getComponents,n=e.getConfigs,r=e.getLabel,u=e.getName,a=e.source;try{var i=function(e){function u(r){function u(e){var t=function(){if(n)return Promise.resolve(n()).then(function(t){var n=D(t),o=function(e,t){void 0===t&&(t={});var n={},o=!1;return j(e,function(e){if("object"==typeof e&&w(e,"component")){if(!w(n,e.component)){var r={};if(w(t,e.component)){var u=t[e.component].getOptions;r=u?u():t[e.component]}n[e.component]=N(e.component,r)}}else o=!0}),o&&_(n)&&(n.unsorted=N("unsorted",{order:999})),n}(n,e);E(a,{config:n,components:o})});var t,r,u,i=(r={},u=function(e){return R(e,function(e,t){var n=e.getOptions;return N(t,n?n():null)})}(t=e),j(t,function(e,t){var n=e.getConfigs,a=e.getSettings,i=e.getTranslations,l=e.getUI,f={component:t},c=function(e,t){var n={group:{path:"groups"},tab:{path:"tabs"}},r=function(e,t){void 0===t&&(t=null);var n={};return j(e,function(e,o){if(e=q(o,e),t){var r=t(o,e);n[r.key]=r.config}else n[o]=e}),n},u=function(o,u,a,i,l,f){return void 0===i&&(i=!0),void 0===l&&(l="group"),function(o,r,u,a){void 0===a&&(a="group");var i=n[a].path,l={};j(u,function(o){if("object"==typeof o&&o.group){var r=o.group;j(n,function(n){var o=P(e,[t,n.path,r]);if(o){T(l,[n.path,r],o),S(e,[t,n.path,r]);var u=P(e,[t,n.path],{});0===_(u)&&S(e,[t,n.path])}})}}),T(e,[t,i,o],O({label:r},l))}(o,u,a,l),r(a,function(e,t){return t.group=t.group?o+"."+t.group:o,f&&f(e,t),{key:i?o+"."+e:e,config:t}})};return{addNested:function(e,t){return r(t,function(t,n){return"object"==typeof n&&(n.visibleIf&&(n.visibleIf=e+"."+n.visibleIf),n.longLabel=F(e)+" ⇢ "+(n.longLabel?n.longLabel:n.label?n.label:F(t))),{key:e+"."+t,config:n}})},addFeature:function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!0),w(n,"enabled"))throw new Error('Feature "'+e+'" should not contain a property named "enabled".');return n=O({enabled:q("enabled",r)},n),u(e,t,n,a,"group",function(t,n){"enabled"!==t&&"object"==typeof n&&o.default.set(n,"visibleIf",e+".enabled")})},addGroup:u,addTab:function(e,t){var n=k(e);return u(n,e,t,!1,"tab")},addField:function(e,t){var n={},o=e+".isVisible",r=F(e);return n.isVisible={default:!0,label:"Visible",longLabel:r+" ⇢ Visible",styleClasses:"col-md-2"},n.required={default:!1,label:"Required",longLabel:r+" ⇢ Required",visibleIf:o,styleClasses:"col-md-2"},n.disabled={default:!1,label:"Disabled",longLabel:r+" ⇢ Disabled",visibleIf:o,styleClasses:"col-md-2"},n.readonly={default:!1,label:"Readonly",longLabel:r+" ⇢ Readonly",visibleIf:o,styleClasses:"col-md-2"},n.hasAutoFocus={default:!1,label:"Autofocus",longLabel:r+" ⇢ Autofocus",visibleIf:o,styleClasses:"col-md-2"},n.pattern={default:"",label:"Pattern",longLabel:r+" ⇢ Pattern",visibleIf:o,styleClasses:"col-md-12"},t&&t&&t({insert:function(e,t){if(w(n,e))throw new Error("Field "+e+" already exists!");var u=z(e,t,{visibleIf:o,styleClasses:"col-md-12"});u.longLabel=r+" ⇢ "+u.label,n[e]=u},modify:function(e,t){E(n[e],q(e,t,!0))}}),u(e,F(e),n,!0)}}}(u,t);n?A(r,n(c),f):(a&&A(r,a(c),O(f,{category:"setting"})),i&&A(r,i(c),O(f,{category:"translation"})),l&&A(r,l(c),O(f,{category:"ui"})))}),{configs:r,components:u});E(a,{configs:i.configs,components:i.components})}();return t&&t.then?t.then(function(){return a}):a}var a={name:e,label:r};return t?Promise.resolve(t()).then(u):u(null)}return r?Promise.resolve(r()).then(u):u(F(e))};return Promise.resolve(u?Promise.resolve(u()).then(i):i(a))}catch(e){return Promise.reject(e)}},K=/*#__PURE__*/function(e){var t,n;function o(t,n){var o;return(o=e.call(this,n.message+' ("'+t+'" source)')||this).name="SourceError",o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n),o}(/*#__PURE__*/m(Error));e.SourceError=K,e.getTransformationOptions=a,e.parseSource=B,e.parseSourceConfigs=function(e,t){try{return Promise.resolve(B(v({source:e},t))).then(function(e){return e.configs})}catch(e){return Promise.reject(e)}},e.transformResponse=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var o=a(t),r=function(e,t){void 0===t&&(t=null);var n={};return c(e,function(e,o){if(t){var r=t(o,e),u=r.key,a=r.value;u&&(o=u),a&&(e=a)}n[o]=e}),n}(e,function(e){if(o.categorized){var t=s(n,e);t&&(e=t.category+"."+e)}return{key:e}});return o.nested?f(r):r},e.transformToConfigValues=function(e,t){void 0===t&&(t={});var n=a(t),o=function(e,t){void 0===t&&(t=null);var n={};return d(e,function(e,o){var r=p(e,"value")?e.value:e.default;if(t){var u=t(o,e),a=u.key,i=u.value;a&&(o=a),i&&(r=i)}n[o]=r}),n}(e,function(e,t){return{key:e=n.categorized?t.category+"."+e:e}});return n.nested?f(o):o},e.transformToNested=f});
//# sourceMappingURL=index.umd.js.map
