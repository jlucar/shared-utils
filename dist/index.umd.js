!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],t):t((e||self).utils={},e.lodash)}(this,function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/n(t),r=o.default.each,u=o.default.setWith,a=function(e){var t={};return r(e,function(e,n){u(t,n,e,Object)}),t},i=o.default.has,l=function(e){var t={};return function e(t,n,o){void 0===o&&(o=[]),Object.entries(n).forEach(function(n){var r=n[0],u=n[1];"object"!=typeof u||Array.isArray(u)||i(u,"default")?t[[].concat(o,[r]).join(".")]=u:e(t,u,[].concat(o,[r]))})}(t,e),t};function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f.apply(this,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e,t,n){return p=d()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&c(r,n.prototype),r},p.apply(null,arguments)}function b(e){var t="function"==typeof Map?new Map:void 0;return b=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},b(e)}var v=o.default.each,y=o.default.isBoolean,g=o.default.isObject,h=o.default.last,m=o.default.split,j=o.default.startsWith,w=o.default.trimEnd,O=o.default.map,C=function(e,t){var n=l(t);return O(n,function(t){return"object"==typeof t&&(t.group=e),t}),n},I=o.default.assign,k=o.default.has,P=o.default.isBoolean,E=o.default.isObject,A=o.default.map,F=o.default.mapValues,V=o.default.merge,R=o.default.size,S=o.default.has,_=o.default.map,x=o.default.mapKeys,T=o.default.merge,q=o.default.mapValues,B=o.default.merge,D=o.default.assign,L=o.default.has,M=o.default.map,N=o.default.mapValues,K=o.default.setWith,W=function(e,t){return e.map(function(e){var n="string"==typeof e?e:o.default.get(e,"key");if(L(t,n)){var r="object"==typeof e?e:{};return delete r.key,D({model:n},t[n],r)}return console.log(n+" is not a config!"),null}).filter(function(e){if(null!==e)return e})},z=o.default.assign,G=o.default.each,J=o.default.get,U=o.default.has,H=o.default.isObject,Q=o.default.kebabCase,X=o.default.last,Y=o.default.mapKeys,Z=o.default.mapValues,$=o.default.merge,ee=o.default.set,te=o.default.size,ne=o.default.split,oe=o.default.startCase,re=o.default.unset,ue=function(e){return"object"==typeof e&&"boolean"==typeof e.default?"switch":"input"},ae=function(e,t,n){if(void 0===n&&(n=!1),H(t)){if(!n&&!U(t,"default"))throw new Error('Config "'+e+'" is missing a "default" value.')}else t={default:t};return t},ie=function(e,t,n){if(void 0===n&&(n={}),delete(t=ae(e,t)).key,t.docLink){var o='Documentation on this feature can be found <a href="'+t.docLink+'">here</a>.';t.hint=t.hint?o+"<br>"+t.hint:o,delete t.docLink}return z({default:null,type:ue(t),label:oe(X(ne(e,"."))),category:"setting"},t,n)},le=function(e,t,n){return void 0===t&&(t={}),e=Y(e,function(e,t){return o.default.get(e,"key",t)}),Z(e,function(e,o){return n&&n(o,e),ie(o,e,t)})},fe=function(e,t,n){$(e,function(e,t,n){return le(t,n,function(t){if(U(e,t))throw new Error('Duplicate key: "'+t+'"')})}(e,t,n))},se=function(e,t){return z({label:oe(X(ne(e,"."))),order:0,toggleable:!1,description:null,rootKey:null},t)},ce=/*#__PURE__*/function(e){var t,n;function o(t,n){var o;return(o=e.call(this,n.message+' ("'+t+'" source)')||this).name="SourceError",o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),o}(/*#__PURE__*/b(Error));e.SourceError=ce,e.convertToNested=a,e.createConfigs=l,e.createConfigsFromJson=function(e){var t={},n=function(e,t){void 0===t&&(t="");var n=function e(t,n){var o;if(!t||"object"!=typeof t)return[(o={},o[n]=t,o)];var r=n?Array.isArray(t)?n:n+".":"";return Object.keys(t).flatMap(function(n){return e(t[n],Array.isArray(t)?r+"["+n+"]":""+r+n)}).reduce(function(e,t){return f({},e,t)},[])}(e,t),o={};return v(n,function(e,t){var n=m(t,"."),r=h(n);j(r,"#")?"#value"===r&&(o[w(t,".#value")]=e):o[t]=e}),o}(e);return v(n,function(e,n){var o=e;g(e)&&(o=e["#value"]);var r={default:o};y(o)&&(r.type="switch"),t[n]=r}),t},e.createFeature=function(e,t,n){void 0===n&&(n=null);var o=null,r="object"==typeof n&&R(n)||-1;if(1!==r)throw new Error('The "'+e+'" group must only have one parent key, '+r+" given.");var u="object"==typeof n&&F(n,function(e,n){if(!o){var r={type:"switch",default:t};if(E(t)){if(!k(t,"default")||!P(t.default))throw new Error('A "default" boolean value must be supplied in the object');V(r,t)}e=I({enabled:r},e),o=n+".enabled"}return e}),a=C(e,u);return A(a,function(e,t){return"object"==typeof e&&t!==o&&(e.visibleIf=o),e}),a},e.createField=function(e,t){void 0===t&&(t=null);var n={},r=e+".isVisible";n.isVisible={type:"switch",label:"Visible",default:!0,group:e,styleClasses:"col-md-2"},n.required={type:"switch",label:"Required",default:!1,group:e,visibleIf:r,styleClasses:"col-md-2"},n.disabled={type:"switch",label:"Disabled",default:!1,group:e,visibleIf:r,styleClasses:"col-md-2"},n.readonly={type:"switch",label:"Readonly",default:!1,group:e,visibleIf:r,styleClasses:"col-md-2"},n.hasAutoFocus={type:"switch",label:"Autofocus",default:!1,group:e,visibleIf:r,styleClasses:"col-md-2"},n.pattern={type:"input",label:"Pattern",default:"",group:e,visibleIf:r,styleClasses:"col-md-12"},t&&(n=t(n),_(n,function(t,n){"object"!=typeof t||S(t,"group")||(t.group=e),"object"!=typeof t||"isVisible"===n||S(t,"visibleIf")||o.default.set(t,"visibleIf",r),"object"!=typeof t||S(t,"styleClasses")||(t.styleClasses="col-md-12")}));var u=x(n,function(t,n){return e+"."+n});return C(e,u)},e.createGroup=C,e.createSection=function(e,t,n,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null);var r={configs:{}};return e&&(r.configs=e),t&&(r.category=t),n&&(r.section=n),o&&T(r,o),r},e.createSubSection=function(e,t){return q(e,function(e){return B(e,{subsection:t}),e})},e.getMockResponse=function(e,t){void 0===t&&(t=null),t=z({nested:!1},t);var n={};return G(e,function(e,t){n[t]=e.default}),t.nested?a(n):n},e.parseOnboarder=function(e,t,n){var o={name:e,schema:[],model:{}};if(t){var r=function(e,t){return N(e,function(e,n){return{id:n,order:Number(n),label:e.label,fields:W(e.fields,t)}})}(t,n);o.schema=r,o.model=function(e){var t={};return M(e,function(e){M(e.fields,function(e){K(t,e.model,e.default,Object)})}),t}(r)}return o},e.parseSource=function(e){var t=e.getComponents,n=e.getConfigs,r=e.getLabel,u=e.getName,a=e.source;try{var i=function(e){function u(r){function u(e){var t=function(){if(n)return Promise.resolve(n()).then(function(t){var n=le(t),o=function(e,t){void 0===t&&(t={});var n={},o=!1;return G(e,function(e){if("object"==typeof e&&U(e,"component")){if(!U(n,e.component)){var r={};if(U(t,e.component)){var u=t[e.component].getOptions;r=u?u():t[e.component]}n[e.component]=se(e.component,r)}}else o=!0}),o&&te(n)&&(n.unsorted=se("unsorted",{order:999})),n}(n,e);$(a,{config:n,components:o})});var t,r,u,i=(r={},u=function(e){return Z(e,function(e,t){var n=e.getOptions;return se(t,n?n():null)})}(t=e),G(t,function(e,t){var n=e.getConfigs,a=e.getSettings,i=e.getTranslations,l=e.getUI,f={component:t},s=function(e,t){var n={group:{path:"groups"},tab:{path:"tabs"}},r=function(e,t){void 0===t&&(t=null);var n={};return G(e,function(e,o){if(e=ae(o,e),t){var r=t(o,e);n[r.key]=r.config}else n[o]=e}),n},u=function(o,u,a,i,l,f){return void 0===i&&(i=!0),void 0===l&&(l="group"),function(o,r,u,a){void 0===a&&(a="group");var i=n[a].path,l={};G(u,function(o){if("object"==typeof o&&o.group){var r=o.group;G(n,function(n){var o=J(e,[t,n.path,r]);if(o){ee(l,[n.path,r],o),re(e,[t,n.path,r]);var u=J(e,[t,n.path],{});0===te(u)&&re(e,[t,n.path])}})}}),ee(e,[t,i,o],z({label:r},l))}(o,u,a,l),r(a,function(e,t){return t.group=t.group?o+"."+t.group:o,f&&f(e,t),{key:i?o+"."+e:e,config:t}})};return{addNested:function(e,t){return r(t,function(t,n){return"object"==typeof n&&n.visibleIf&&(n.visibleIf=e+"."+n.visibleIf),{key:e+"."+t,config:n}})},addFeature:function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!0),U(n,"enabled"))throw new Error('Feature "'+e+'" should not contain a property named "enabled".');return n=z({enabled:ae("enabled",r)},n),u(e,t,n,a,"group",function(t,n){"enabled"!==t&&"object"==typeof n&&o.default.set(n,"visibleIf",e+".enabled")})},addGroup:u,addTab:function(e,t){var n=Q(e);return u(n,e,t,!1,"tab")},addField:function(e,t){var n={},o=e+".isVisible";return n.isVisible={default:!0,label:"Visible",styleClasses:"col-md-2"},n.required={default:!1,label:"Required",visibleIf:o,styleClasses:"col-md-2"},n.disabled={default:!1,label:"Disabled",visibleIf:o,styleClasses:"col-md-2"},n.readonly={default:!1,label:"Readonly",visibleIf:o,styleClasses:"col-md-2"},n.hasAutoFocus={default:!1,label:"Autofocus",visibleIf:o,styleClasses:"col-md-2"},n.pattern={default:"",label:"Pattern",visibleIf:o,styleClasses:"col-md-12"},t&&t&&t({insert:function(e,t){if(U(n,e))throw new Error("Field "+e+" already exists!");n[e]=ie(e,t,{visibleIf:o,styleClasses:"col-md-12"})},modify:function(e,t){$(n[e],ae(e,t,!0))}}),u(e,oe(e),n,!0)}}}(u,t);n?fe(r,n(s),f):(a&&fe(r,a(s),z(f,{category:"setting"})),i&&fe(r,i(s),z(f,{category:"translation"})),l&&fe(r,l(s),z(f,{category:"ui"})))}),{configs:r,components:u});$(a,{configs:i.configs,components:i.components})}();return t&&t.then?t.then(function(){return a}):a}var a={name:e,label:r};return t?Promise.resolve(t()).then(u):u(null)}return r?Promise.resolve(r()).then(u):u(oe(e))};return Promise.resolve(u?Promise.resolve(u()).then(i):i(a))}catch(e){return Promise.reject(e)}}});
//# sourceMappingURL=index.umd.js.map
