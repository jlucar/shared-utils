!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],t):t((e||self).utils={},e.lodash)}(this,function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/n(t),r=o.default.each,u=o.default.setWith,i=function(e){var t={};return r(e,function(e,n){u(t,n,e,Object)}),t};function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function c(e,t,n){return c=f()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&a(r,n.prototype),r},c.apply(null,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)},s(e)}var d=o.default.assign,p=o.default.each,b=o.default.get,v=o.default.has,g=o.default.isObject,y=o.default.kebabCase,h=o.default.last,m=o.default.mapKeys,O=o.default.mapValues,w=o.default.merge,L=o.default.set,C=o.default.size,k=o.default.split,j=o.default.startCase,I=o.default.unset,P=function(e){return"boolean"==typeof e.default?"switch":"input"},R=function(e,t,n){if(void 0===n&&(n=!1),g(t)){if(!n&&!v(t,"default"))throw new Error('Config "'+e+'" is missing a "default" value.')}else t={default:t};return t},E=function(e,t,n){if(void 0===n&&(n={}),delete(t=R(e,t)).key,t.docLink){var o='Documentation on this feature can be found <a href="'+t.docLink+'">here</a>.';t.hint=t.hint?o+"<br>"+t.hint:o,delete t.docLink}return d({default:null,type:P(t),label:j(h(k(e,"."))),category:"setting"},t,n)},_=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=null),e=m(e,function(e,t){return e.key?e.key:t}),O(e,function(e,o){return n&&n(o,e),E(o,e,t)})},x=function(e,t,n){w(e,function(e,t,n){return _(t,n,function(t){if(v(e,t))throw new Error('Duplicate key: "'+t+'"')})}(e,t,n))},F=function(e,t){return void 0===t&&(t=null),d({label:j(h(k(e,"."))),order:0,toggleable:!1,description:null,rootKey:null},t)},S=/*#__PURE__*/function(e){var t,n;function o(t,n){var o;return(o=e.call(this,n.message+' ("'+t+'" source)')||this).name="SourceError",o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),o}(/*#__PURE__*/s(Error));e.SourceError=S,e.convertToNested=i,e.getMockResponse=function(e,t){void 0===t&&(t=null),t=d({nested:!1},t);var n={};return p(e,function(e,t){n[t]=e.default}),t.nested?i(n):n},e.parseSource=function(e){var t=e.getComponents,n=e.getConfigs,o=e.getLabel,r=e.getName,u=e.source;try{var i=function(e){var t=function(){if(n)return Promise.resolve(n()).then(function(t){var n=_(t),o=function(e,t){void 0===t&&(t={});var n={},o=!1;return p(e,function(e){if(v(e,"component")){if(!v(n,e.component)){var r={};if(v(t,e.component)){var u=t[e.component].getOptions;r=u?u():t[e.component]}n[e.component]=F(e.component,r)}}else o=!0}),o&&C(n)&&(n.unsorted=F("unsorted",{order:999})),n}(n,e);w(a,{configs:n,components:o})});var t,o,r,u=(o={},r=function(e){return O(e,function(e,t){var n=e.getOptions;return F(t,n?n():null)})}(t=e),p(t,function(e,t){var n=e.getConfigs,u=e.getSettings,i=e.getTranslations,l=e.getUI,a={component:t},f=function(e,t){var n={group:{path:"groups"},tab:{path:"tabs"}},o=function(e,t){void 0===t&&(t=null);var n={};return p(e,function(e,o){if(e=R(o,e),t){var r=t(o,e);n[r.key]=r.config}else n[o]=e}),n},r=function(r,u,i,l,a,f){return void 0===l&&(l=!0),void 0===a&&(a="group"),void 0===f&&(f=null),function(o,r,u,i){void 0===i&&(i="group");var l=n[i].path,a={};p(u,function(o){if(o.group){var r=o.group;p(n,function(n){var o=b(e,[t,n.path,r]);if(o){L(a,[n.path,r],o),I(e,[t,n.path,r]);var u=b(e,[t,n.path],{});0===C(u)&&I(e,[t,n.path])}})}}),L(e,[t,l,o],d({label:r},a))}(r,u,i,a),o(i,function(e,t){return t.group=t.group?r+"."+t.group:r,f&&f(e,t),{key:l?r+"."+e:e,config:t}})};return{addNested:function(e,t){return o(t,function(t,n){return n.visibleIf&&(n.visibleIf=e+"."+n.visibleIf),n.longLabel=j(e)+" ⇢ "+(n.longLabel?n.longLabel:n.label?n.label:j(t)),{key:e+"."+t,config:n}})},addFeature:function(e,t,n,o,u){if(void 0===o&&(o=!1),void 0===u&&(u=!0),v(n,"enabled"))throw new Error('Feature "'+e+'" should not contain a property named "enabled".');return n=d({enabled:R("enabled",o)},n),r(e,t,n,u,"group",function(t,n){"enabled"!==t&&(n.visibleIf=e+".enabled")})},addGroup:r,addTab:function(e,t){var n=y(e);return r(n,e,t,!1,"tab")},addField:function(e,t){void 0===t&&(t=null);var n={},o=e+".isVisible",u=j(e);return n.isVisible={default:!0,label:"Visible",longLabel:u+" ⇢ Visible",styleClasses:"col-md-2"},n.required={default:!1,label:"Required",longLabel:u+" ⇢ Required",visibleIf:o,styleClasses:"col-md-2"},n.disabled={default:!1,label:"Disabled",longLabel:u+" ⇢ Disabled",visibleIf:o,styleClasses:"col-md-2"},n.readonly={default:!1,label:"Readonly",longLabel:u+" ⇢ Readonly",visibleIf:o,styleClasses:"col-md-2"},n.hasAutoFocus={default:!1,label:"Autofocus",longLabel:u+" ⇢ Autofocus",visibleIf:o,styleClasses:"col-md-2"},n.pattern={default:"",label:"Pattern",longLabel:u+" ⇢ Pattern",visibleIf:o,styleClasses:"col-md-12"},t&&t({insert:function(e,t){if(v(n,e))throw new Error("Field "+e+" already exists!");var r=E(e,t,{visibleIf:o,styleClasses:"col-md-12"});r.longLabel=u+" ⇢ "+r.label,n[e]=r},modify:function(e,t){w(n[e],R(e,t,!0))}}),r(e,j(e),n,!0)}}}(r,t);n?x(o,n(f),a):(u&&x(o,u(f),d(a,{category:"setting"})),i&&x(o,i(f),d(a,{category:"translation"})),l&&x(o,l(f),d(a,{category:"ui"})))}),{configs:o,components:r});w(a,{configs:u.configs,components:u.components})}();return t&&t.then?t.then(function(){return a}):a},l=r?r():u,a={name:l,label:o?o():j(l)};return Promise.resolve(t?Promise.resolve(t()).then(i):i(null))}catch(e){return Promise.reject(e)}}});
//# sourceMappingURL=index.umd.js.map
